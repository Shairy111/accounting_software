(self["webpackChunkbackend"] = self["webpackChunkbackend"] || []).push([[8853],{

/***/ 67506:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var getMethodColor=function getMethodColor(verb){switch(verb){case'POST':{return{text:'success600',border:'success200',background:'success100'};}case'GET':{return{text:'secondary600',border:'secondary200',background:'secondary100'};}case'PUT':{return{text:'warning600',border:'warning200',background:'warning100'};}case'DELETE':{return{text:'danger600',border:'danger200',background:'danger100'};}default:{return{text:'neutral600',border:'neutral200',background:'neutral100'};}}};var _default=getMethodColor;exports.default=_default;

/***/ }),

/***/ 35023:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireDefault(__webpack_require__(67294));var _styledComponents=_interopRequireDefault(__webpack_require__(78384));var _Stack=__webpack_require__(9008);var _Box=__webpack_require__(5493);var _Typography=__webpack_require__(49425);var _map=_interopRequireDefault(__webpack_require__(35161));var _tail=_interopRequireDefault(__webpack_require__(13217));var _reactIntl=__webpack_require__(97132);var _propTypes=_interopRequireDefault(__webpack_require__(45697));var _getMethodColor=_interopRequireDefault(__webpack_require__(67506));var MethodBox=/*#__PURE__*/(0,_styledComponents["default"])(_Box.Box).withConfig({displayName:"BoundRoute__MethodBox",componentId:"vrpses-0"})(["margin:-1px;border-radius:"," 0 0 ",";"],function(_ref){var theme=_ref.theme;return theme.spaces[1];},function(_ref2){var theme=_ref2.theme;return theme.spaces[1];});function BoundRoute(_ref3){var route=_ref3.route;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var method=route.method,title=route.handler,path=route.path;var formattedRoute=path?(0,_tail["default"])(path.split('/')):[];var _ref4=title?title.split('.'):[],_ref5=(0,_slicedToArray2["default"])(_ref4,2),_ref5$=_ref5[0],controller=_ref5$===void 0?'':_ref5$,_ref5$2=_ref5[1],action=_ref5$2===void 0?'':_ref5$2;var colors=(0,_getMethodColor["default"])(route.method);return/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:2},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",as:"h3"},formatMessage({id:'users-permissions.BoundRoute.title',defaultMessage:'Bound route to'}),"\xA0",/*#__PURE__*/_react["default"].createElement("span",null,controller),/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",textColor:"primary600"},".",action)),/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{horizontal:true,hasRadius:true,background:"neutral0",borderColor:"neutral200",size:0},/*#__PURE__*/_react["default"].createElement(MethodBox,{background:colors.background,borderColor:colors.border,padding:2},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{fontWeight:"bold",textColor:colors.text},method)),/*#__PURE__*/_react["default"].createElement(_Box.Box,{paddingLeft:2,paddingRight:2},(0,_map["default"])(formattedRoute,function(value){return/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{key:value,textColor:value.includes(':')?'neutral600':'neutral900'},"/",value);}))));}BoundRoute.defaultProps={route:{handler:'Nocontroller.error',method:'GET',path:'/there-is-no-path'}};BoundRoute.propTypes={route:_propTypes["default"].shape({handler:_propTypes["default"].string,method:_propTypes["default"].string,path:_propTypes["default"].string})};var _default=BoundRoute;exports.default=_default;

/***/ }),

/***/ 90114:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _styledComponents=_interopRequireWildcard(__webpack_require__(78384));var _Box=__webpack_require__(5493);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var activeCheckboxWrapperStyles=/*#__PURE__*/(0,_styledComponents.css)(["background:",";svg{opacity:1;}"],function(props){return props.theme.colors.primary100;});var CheckboxWrapper=/*#__PURE__*/(0,_styledComponents["default"])(_Box.Box).withConfig({displayName:"CheckboxWrapper",componentId:"sc-1ltdwf1-0"})(["display:flex;justify-content:space-between;align-items:center;svg{opacity:0;path{fill:",";}}"," &:hover{","}"],function(props){return props.theme.colors.primary600;},function(props){return props.isActive&&activeCheckboxWrapperStyles;},activeCheckboxWrapperStyles);var _default=CheckboxWrapper;exports.default=_default;

/***/ }),

/***/ 16590:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(67294));var _lodash=__webpack_require__(96486);var _styledComponents=_interopRequireDefault(__webpack_require__(78384));var _propTypes=_interopRequireDefault(__webpack_require__(45697));var _Box=__webpack_require__(5493);var _Checkbox=__webpack_require__(81325);var _Flex=__webpack_require__(67826);var _Typography=__webpack_require__(49425);var _Grid=__webpack_require__(34626);var _Cog=_interopRequireDefault(__webpack_require__(70736));var _reactIntl=__webpack_require__(97132);var _CheckboxWrapper=_interopRequireDefault(__webpack_require__(90114));var _UsersPermissionsContext=__webpack_require__(36928);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var Border=/*#__PURE__*/_styledComponents["default"].div.withConfig({displayName:"SubCategory__Border",componentId:"r9ycls-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(_ref){var theme=_ref.theme;return theme.colors.neutral150;});var SubCategory=function SubCategory(_ref2){var subCategory=_ref2.subCategory;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useUsersPermissions=(0,_UsersPermissionsContext.useUsersPermissions)(),onChange=_useUsersPermissions.onChange,onChangeSelectAll=_useUsersPermissions.onChangeSelectAll,onSelectedAction=_useUsersPermissions.onSelectedAction,selectedAction=_useUsersPermissions.selectedAction,modifiedData=_useUsersPermissions.modifiedData;var currentScopedModifiedData=(0,_react.useMemo)(function(){return(0,_lodash.get)(modifiedData,subCategory.name,{});},[modifiedData,subCategory]);var hasAllActionsSelected=(0,_react.useMemo)(function(){return Object.values(currentScopedModifiedData).every(function(action){return action.enabled===true;});},[currentScopedModifiedData]);var hasSomeActionsSelected=(0,_react.useMemo)(function(){return Object.values(currentScopedModifiedData).some(function(action){return action.enabled===true;})&&!hasAllActionsSelected;},[currentScopedModifiedData,hasAllActionsSelected]);var handleChangeSelectAll=(0,_react.useCallback)(function(_ref3){var name=_ref3.target.name;onChangeSelectAll({target:{name:name,value:!hasAllActionsSelected}});},[hasAllActionsSelected,onChangeSelectAll]);var isActionSelected=(0,_react.useCallback)(function(actionName){return selectedAction===actionName;},[selectedAction]);return/*#__PURE__*/_react["default"].createElement(_Box.Box,null,/*#__PURE__*/_react["default"].createElement(_Flex.Flex,{justifyContent:"space-between",alignItems:"center"},/*#__PURE__*/_react["default"].createElement(_Box.Box,{paddingRight:4},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"sigma",textColor:"neutral600"},subCategory.label)),/*#__PURE__*/_react["default"].createElement(Border,null),/*#__PURE__*/_react["default"].createElement(_Box.Box,{paddingLeft:4},/*#__PURE__*/_react["default"].createElement(_Checkbox.Checkbox,{name:subCategory.name,value:hasAllActionsSelected,onValueChange:function onValueChange(value){return handleChangeSelectAll({target:{name:subCategory.name,value:value}});},indeterminate:hasSomeActionsSelected},formatMessage({id:'app.utils.select-all',defaultMessage:'Select all'})))),/*#__PURE__*/_react["default"].createElement(_Flex.Flex,{paddingTop:6,paddingBottom:6},/*#__PURE__*/_react["default"].createElement(_Grid.Grid,{gap:2,style:{flex:1}},subCategory.actions.map(function(action){var name="".concat(action.name,".enabled");return/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:6,key:action.name},/*#__PURE__*/_react["default"].createElement(_CheckboxWrapper["default"],{isActive:isActionSelected(action.name),padding:2,hasRadius:true},/*#__PURE__*/_react["default"].createElement(_Checkbox.Checkbox,{value:(0,_lodash.get)(modifiedData,name,false),name:name,onValueChange:function onValueChange(value){return onChange({target:{name:name,value:value}});}},action.label),/*#__PURE__*/_react["default"].createElement("button",{type:"button","data-testid":"action-cog",onClick:function onClick(){return onSelectedAction(action.name);},style:{display:'inline-flex',alignItems:'center'}},/*#__PURE__*/_react["default"].createElement(_Cog["default"],null))));}))));};SubCategory.propTypes={subCategory:_propTypes["default"].object.isRequired};var _default=SubCategory;exports.default=_default;

/***/ }),

/***/ 28615:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(319));var _react=_interopRequireWildcard(__webpack_require__(67294));var _propTypes=_interopRequireDefault(__webpack_require__(45697));var _sortBy=_interopRequireDefault(__webpack_require__(89734));var _Box=__webpack_require__(5493);var _SubCategory=_interopRequireDefault(__webpack_require__(16590));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var PermissionRow=function PermissionRow(_ref){var name=_ref.name,permissions=_ref.permissions;var subCategories=(0,_react.useMemo)(function(){return(0,_sortBy["default"])(Object.values(permissions.controllers).reduce(function(acc,curr,index){var currentName="".concat(name,".controllers.").concat(Object.keys(permissions.controllers)[index]);var actions=(0,_sortBy["default"])(Object.keys(curr).reduce(function(acc,current){return[].concat((0,_toConsumableArray2["default"])(acc),[_objectSpread(_objectSpread({},curr[current]),{},{label:current,name:"".concat(currentName,".").concat(current)})]);},[]),'label');return[].concat((0,_toConsumableArray2["default"])(acc),[{actions:actions,label:Object.keys(permissions.controllers)[index],name:currentName}]);},[]),'label');},[name,permissions]);return/*#__PURE__*/_react["default"].createElement(_Box.Box,{padding:6},subCategories.map(function(subCategory){return/*#__PURE__*/_react["default"].createElement(_SubCategory["default"],{key:subCategory.name,subCategory:subCategory});}));};PermissionRow.propTypes={name:_propTypes["default"].string.isRequired,permissions:_propTypes["default"].object.isRequired};var _default=PermissionRow;exports.default=_default;

/***/ }),

/***/ 27933:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireWildcard(__webpack_require__(67294));var _Accordion=__webpack_require__(96654);var _reactIntl=__webpack_require__(97132);var _Box=__webpack_require__(5493);var _Stack=__webpack_require__(9008);var _UsersPermissionsContext=__webpack_require__(36928);var _formatPluginName=_interopRequireDefault(__webpack_require__(3226));var _PermissionRow=_interopRequireDefault(__webpack_require__(28615));var _init=_interopRequireDefault(__webpack_require__(91897));var _reducer=__webpack_require__(61253);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var Permissions=function Permissions(){var _useUsersPermissions=(0,_UsersPermissionsContext.useUsersPermissions)(),modifiedData=_useUsersPermissions.modifiedData;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useReducer=(0,_react.useReducer)(_reducer.reducer,_reducer.initialState,function(state){return(0,_init["default"])(state,modifiedData);}),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),collapses=_useReducer2[0].collapses,dispatch=_useReducer2[1];var handleToggle=function handleToggle(index){return dispatch({type:'TOGGLE_COLLAPSE',index:index});};return/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:1},collapses.map(function(collapse,index){return/*#__PURE__*/_react["default"].createElement(_Accordion.Accordion,{expanded:collapse.isOpen,toggle:function toggle(){return handleToggle(index);},key:collapse.name,variant:index%2===0?'secondary':undefined},/*#__PURE__*/_react["default"].createElement(_Accordion.AccordionToggle,{title:(0,_formatPluginName["default"])(collapse.name),description:formatMessage({id:'users-permissions.Plugin.permissions.plugins.description',defaultMessage:'Define all allowed actions for the {name} plugin.'},{name:collapse.name}),variant:index%2?'primary':'secondary'}),/*#__PURE__*/_react["default"].createElement(_Accordion.AccordionContent,null,/*#__PURE__*/_react["default"].createElement(_Box.Box,null,/*#__PURE__*/_react["default"].createElement(_PermissionRow["default"],{permissions:modifiedData[collapse.name],name:collapse.name}))));}));};var _default=Permissions;exports.default=_default;

/***/ }),

/***/ 91897:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var init=function init(initialState,permissions){var collapses=Object.keys(permissions).sort().map(function(name){return{name:name,isOpen:false};});return _objectSpread(_objectSpread({},initialState),{},{collapses:collapses});};var _default=init;exports.default=_default;

/***/ }),

/***/ 61253:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.reducer=exports.initialState=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _immer=_interopRequireDefault(__webpack_require__(66312));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var initialState={collapses:[]};exports.initialState=initialState;var reducer=function reducer(state,action){return(// eslint-disable-next-line consistent-return
(0,_immer["default"])(state,function(draftState){switch(action.type){case'TOGGLE_COLLAPSE':{draftState.collapses=state.collapses.map(function(collapse,index){if(index===action.index){return _objectSpread(_objectSpread({},collapse),{},{isOpen:!collapse.isOpen});}return _objectSpread(_objectSpread({},collapse),{},{isOpen:false});});break;}default:return draftState;}}));};exports.reducer=reducer;

/***/ }),

/***/ 9481:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(67294));var _reactIntl=__webpack_require__(97132);var _Typography=__webpack_require__(49425);var _Stack=__webpack_require__(9008);var _Grid=__webpack_require__(34626);var _lodash=__webpack_require__(96486);var _UsersPermissionsContext=__webpack_require__(36928);var _BoundRoute=_interopRequireDefault(__webpack_require__(35023));var Policies=function Policies(){var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useUsersPermissions=(0,_UsersPermissionsContext.useUsersPermissions)(),selectedAction=_useUsersPermissions.selectedAction,routes=_useUsersPermissions.routes;var path=(0,_lodash.without)(selectedAction.split('.'),'controllers');var controllerRoutes=(0,_lodash.get)(routes,path[0]);var pathResolved=path.slice(1).join('.');var displayedRoutes=(0,_lodash.isEmpty)(controllerRoutes)?[]:controllerRoutes.filter(function(o){return o.handler.endsWith(pathResolved);});return/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:'100%'}},selectedAction?/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:2},displayedRoutes.map(function(route,key){return/*#__PURE__*/ (// eslint-disable-next-line react/no-array-index-key
_react["default"].createElement(_BoundRoute["default"],{key:key,route:route}));})):/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:2},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",as:"h3"},formatMessage({id:'users-permissions.Policies.header.title',defaultMessage:'Advanced settings'})),/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{as:"p",textColor:"neutral600"},formatMessage({id:'users-permissions.Policies.header.hint',defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))));};var _default=Policies;exports.default=_default;

/***/ }),

/***/ 38217:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireWildcard(__webpack_require__(67294));var _propTypes=_interopRequireDefault(__webpack_require__(45697));var _Typography=__webpack_require__(49425);var _Stack=__webpack_require__(9008);var _Grid=__webpack_require__(34626);var _reactIntl=__webpack_require__(97132);var _getTrad=_interopRequireDefault(__webpack_require__(30078));var _Policies=_interopRequireDefault(__webpack_require__(9481));var _Permissions=_interopRequireDefault(__webpack_require__(27933));var _reducer=_interopRequireWildcard(__webpack_require__(48462));var _UsersPermissionsContext=__webpack_require__(36928);var _init=_interopRequireDefault(__webpack_require__(4228));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var UsersPermissions=/*#__PURE__*/(0,_react.forwardRef)(function(_ref,ref){var permissions=_ref.permissions,routes=_ref.routes;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useReducer=(0,_react.useReducer)(_reducer["default"],_reducer.initialState,function(state){return(0,_init["default"])(state,permissions,routes);}),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];(0,_react.useImperativeHandle)(ref,function(){return{getPermissions:function getPermissions(){return{permissions:state.modifiedData};},resetForm:function resetForm(){dispatch({type:'ON_RESET'});},setFormAfterSubmit:function setFormAfterSubmit(){dispatch({type:'ON_SUBMIT_SUCCEEDED'});}};});var handleChange=function handleChange(_ref2){var _ref2$target=_ref2.target,name=_ref2$target.name,value=_ref2$target.value;return dispatch({type:'ON_CHANGE',keys:name.split('.'),value:value==='empty__string_value'?'':value});};var handleChangeSelectAll=function handleChangeSelectAll(_ref3){var _ref3$target=_ref3.target,name=_ref3$target.name,value=_ref3$target.value;return dispatch({type:'ON_CHANGE_SELECT_ALL',keys:name.split('.'),value:value});};var handleSelectedAction=function handleSelectedAction(actionToSelect){return dispatch({type:'SELECT_ACTION',actionToSelect:actionToSelect});};var providerValue=_objectSpread(_objectSpread({},state),{},{onChange:handleChange,onChangeSelectAll:handleChangeSelectAll,onSelectedAction:handleSelectedAction});return/*#__PURE__*/_react["default"].createElement(_UsersPermissionsContext.UsersPermissionsProvider,{value:providerValue},/*#__PURE__*/_react["default"].createElement(_Grid.Grid,{gap:0,shadow:"filterShadow",hasRadius:true,background:"neutral0"},/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:6},/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:2},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",as:"h2"},formatMessage({id:(0,_getTrad["default"])('Plugins.header.title'),defaultMessage:'Permissions'})),/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{as:"p",textColor:"neutral600"},formatMessage({id:(0,_getTrad["default"])('Plugins.header.description'),defaultMessage:'Only actions bound by a route are listed below.'}))),/*#__PURE__*/_react["default"].createElement(_Permissions["default"],null))),/*#__PURE__*/_react["default"].createElement(_Policies["default"],null)));});UsersPermissions.propTypes={permissions:_propTypes["default"].object.isRequired,routes:_propTypes["default"].object.isRequired};var _default=/*#__PURE__*/(0,_react.memo)(UsersPermissions);exports.default=_default;

/***/ }),

/***/ 4228:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var init=function init(state,permissions,routes){return _objectSpread(_objectSpread({},state),{},{initialData:permissions,modifiedData:permissions,routes:routes});};var _default=init;exports.default=_default;

/***/ }),

/***/ 48462:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.initialState=exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(319));var _immer=_interopRequireDefault(__webpack_require__(66312));var _lodash=__webpack_require__(96486);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var initialState={initialData:{},modifiedData:{},routes:{},selectedAction:'',policies:[]};exports.initialState=initialState;var reducer=function reducer(state,action){return(0,_immer["default"])(state,function(draftState){switch(action.type){case'ON_CHANGE':{var keysLength=action.keys.length;var isChangingCheckbox=action.keys[keysLength-1]==='enabled';if(action.value&&isChangingCheckbox){var selectedAction=(0,_lodash.take)(action.keys,keysLength-1).join('.');draftState.selectedAction=selectedAction;}(0,_lodash.set)(draftState,['modifiedData'].concat((0,_toConsumableArray2["default"])(action.keys)),action.value);break;}case'ON_CHANGE_SELECT_ALL':{var pathToValue=['modifiedData'].concat((0,_toConsumableArray2["default"])(action.keys));var oldValues=(0,_lodash.get)(state,pathToValue,{});var updatedValues=Object.keys(oldValues).reduce(function(acc,current){acc[current]=_objectSpread(_objectSpread({},oldValues[current]),{},{enabled:action.value});return acc;},{});(0,_lodash.set)(draftState,pathToValue,updatedValues);break;}case'ON_RESET':{draftState.modifiedData=state.initialData;break;}case'ON_SUBMIT_SUCCEEDED':{draftState.initialData=state.modifiedData;break;}case'SELECT_ACTION':{var actionToSelect=action.actionToSelect;draftState.selectedAction=actionToSelect===state.selectedAction?'':actionToSelect;break;}default:return draftState;}});};var _default=reducer;exports.default=_default;

/***/ }),

/***/ 36928:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.useUsersPermissions=exports.UsersPermissionsProvider=exports.UsersPermissions=void 0;var _react=_interopRequireWildcard(__webpack_require__(67294));var _propTypes=_interopRequireDefault(__webpack_require__(45697));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var UsersPermissions=/*#__PURE__*/(0,_react.createContext)({});exports.UsersPermissions=UsersPermissions;var UsersPermissionsProvider=function UsersPermissionsProvider(_ref){var children=_ref.children,value=_ref.value;return/*#__PURE__*/_react["default"].createElement(UsersPermissions.Provider,{value:value},children);};exports.UsersPermissionsProvider=UsersPermissionsProvider;var useUsersPermissions=function useUsersPermissions(){return(0,_react.useContext)(UsersPermissions);};exports.useUsersPermissions=useUsersPermissions;UsersPermissionsProvider.propTypes={children:_propTypes["default"].node.isRequired,value:_propTypes["default"].object.isRequired};

/***/ }),

/***/ 1137:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "useFetchRole", ({enumerable:true,get:function get(){return _useFetchRole["default"];}}));Object.defineProperty(exports, "useForm", ({enumerable:true,get:function get(){return _useForm["default"];}}));Object.defineProperty(exports, "usePlugins", ({enumerable:true,get:function get(){return _usePlugins["default"];}}));Object.defineProperty(exports, "useRolesList", ({enumerable:true,get:function get(){return _useRolesList["default"];}}));var _useForm=_interopRequireDefault(__webpack_require__(78558));var _useRolesList=_interopRequireDefault(__webpack_require__(99498));var _usePlugins=_interopRequireDefault(__webpack_require__(73229));var _useFetchRole=_interopRequireDefault(__webpack_require__(76451));

/***/ }),

/***/ 76451:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* provided dependency */ var console = __webpack_require__(25108);
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=__webpack_require__(67294);var _helperPlugin=__webpack_require__(68547);var _reducer=_interopRequireWildcard(__webpack_require__(53004));var _axiosInstance=_interopRequireDefault(__webpack_require__(27778));var _pluginId=_interopRequireDefault(__webpack_require__(10576));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var useFetchRole=function useFetchRole(id){var _useReducer=(0,_react.useReducer)(_reducer["default"],_reducer.initialState),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var toggleNotification=(0,_helperPlugin.useNotification)();var isMounted=(0,_react.useRef)(null);(0,_react.useEffect)(function(){isMounted.current=true;if(id){fetchRole(id);}else{dispatch({type:'GET_DATA_SUCCEEDED',role:{}});}return function(){return isMounted.current=false;};// eslint-disable-next-line react-hooks/exhaustive-deps
},[id]);var fetchRole=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(roleId){var _yield$axiosIntance$g,role;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _axiosInstance["default"].get("/".concat(_pluginId["default"],"/roles/").concat(roleId));case 3:_yield$axiosIntance$g=_context.sent;role=_yield$axiosIntance$g.data.role;// Prevent updating state on an unmounted component
if(isMounted.current){dispatch({type:'GET_DATA_SUCCEEDED',role:role});}_context.next=13;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);console.error(_context.t0);dispatch({type:'GET_DATA_ERROR'});toggleNotification({type:'warning',message:{id:'notification.error'}});case 13:case"end":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchRole(_x){return _ref.apply(this,arguments);};}();var handleSubmitSucceeded=(0,_react.useCallback)(function(data){dispatch(_objectSpread({type:'ON_SUBMIT_SUCCEEDED'},data));},[]);return _objectSpread(_objectSpread({},state),{},{onSubmitSucceeded:handleSubmitSucceeded});};var _default=useFetchRole;exports.default=_default;

/***/ }),

/***/ 53004:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.initialState=exports.default=void 0;var _immer=_interopRequireDefault(__webpack_require__(66312));/* eslint-disable consistent-return */var initialState={role:{},isLoading:true};exports.initialState=initialState;var reducer=function reducer(state,action){return(0,_immer["default"])(state,function(draftState){switch(action.type){case'GET_DATA_SUCCEEDED':{draftState.role=action.role;draftState.isLoading=false;break;}case'GET_DATA_ERROR':{draftState.isLoading=false;break;}case'ON_SUBMIT_SUCCEEDED':{draftState.role.name=action.name;draftState.role.description=action.description;break;}default:return draftState;}});};var _default=reducer;exports.default=_default;

/***/ }),

/***/ 78558:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* provided dependency */ var console = __webpack_require__(25108);
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=__webpack_require__(67294);var _helperPlugin=__webpack_require__(68547);var _utils=__webpack_require__(26270);var _reducer=_interopRequireWildcard(__webpack_require__(21510));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var useUserForm=function useUserForm(endPoint,permissions){var _useRBAC=(0,_helperPlugin.useRBAC)(permissions),isLoadingForPermissions=_useRBAC.isLoading,allowedActions=_useRBAC.allowedActions;var _useReducer=(0,_react.useReducer)(_reducer["default"],_reducer.initialState),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),_useReducer2$=_useReducer2[0],isLoading=_useReducer2$.isLoading,modifiedData=_useReducer2$.modifiedData,dispatch=_useReducer2[1];var toggleNotification=(0,_helperPlugin.useNotification)();var isMounted=(0,_react.useRef)(true);var abortController=new AbortController();var signal=abortController.signal;(0,_react.useEffect)(function(){var getData=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){var data;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:'GET_DATA'});_context.next=4;return(0,_helperPlugin.request)((0,_utils.getRequestURL)(endPoint),{method:'GET',signal:signal});case 4:data=_context.sent;dispatch({type:'GET_DATA_SUCCEEDED',data:data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);// The user aborted the request
if(isMounted.current){dispatch({type:'GET_DATA_ERROR'});console.error(_context.t0);toggleNotification({type:'warning',message:{id:'notification.error'}});}case 11:case"end":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getData(){return _ref.apply(this,arguments);};}();if(!isLoadingForPermissions){getData();}return function(){abortController.abort();isMounted.current=false;};// eslint-disable-next-line react-hooks/exhaustive-deps
},[isLoadingForPermissions,endPoint]);var dispatchSubmitSucceeded=(0,_react.useCallback)(function(data){dispatch({type:'ON_SUBMIT_SUCCEEDED',data:data});},[]);return{allowedActions:allowedActions,dispatchSubmitSucceeded:dispatchSubmitSucceeded,isLoading:isLoading,isLoadingForPermissions:isLoadingForPermissions,modifiedData:modifiedData};};var _default=useUserForm;exports.default=_default;

/***/ }),

/***/ 21510:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.initialState=exports.default=void 0;var _immer=_interopRequireDefault(__webpack_require__(66312));var initialState={isLoading:true,modifiedData:{}};exports.initialState=initialState;var reducer=function reducer(state,action){return(// eslint-disable-next-line consistent-return
(0,_immer["default"])(state,function(draftState){switch(action.type){case'GET_DATA':{draftState.isLoading=true;draftState.modifiedData={};break;}case'GET_DATA_SUCCEEDED':{draftState.isLoading=false;draftState.modifiedData=action.data;break;}case'GET_DATA_ERROR':{draftState.isLoading=true;break;}case'ON_SUBMIT_SUCCEEDED':{draftState.modifiedData=action.data;break;}default:{return draftState;}}}));};var _default=reducer;exports.default=_default;

/***/ }),

/***/ 73229:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=__webpack_require__(67294);var _helperPlugin=__webpack_require__(68547);var _lodash=__webpack_require__(96486);var _init=_interopRequireDefault(__webpack_require__(37656));var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _utils=__webpack_require__(26270);var _axiosInstance=_interopRequireDefault(__webpack_require__(27778));var _reducer=_interopRequireWildcard(__webpack_require__(48170));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var usePlugins=function usePlugins(){var shouldFetchData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var toggleNotification=(0,_helperPlugin.useNotification)();var _useReducer=(0,_react.useReducer)(_reducer["default"],_reducer.initialState,function(){return(0,_init["default"])(_reducer.initialState,shouldFetchData);}),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),_useReducer2$=_useReducer2[0],permissions=_useReducer2$.permissions,routes=_useReducer2$.routes,isLoading=_useReducer2$.isLoading,dispatch=_useReducer2[1];var fetchPlugins=(0,_react.useCallback)(/*#__PURE__*/(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(){var _yield$Promise$all,_yield$Promise$all2,_permissions,_routes,message;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:'GET_DATA'});_context2.next=4;return Promise.all(["/".concat(_pluginId["default"],"/permissions"),"/".concat(_pluginId["default"],"/routes")].map(/*#__PURE__*/function(){var _ref2=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(endpoint){var res;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _axiosInstance["default"].get(endpoint);case 2:res=_context.sent;return _context.abrupt("return",res.data);case 4:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()));case 4:_yield$Promise$all=_context2.sent;_yield$Promise$all2=(0,_slicedToArray2["default"])(_yield$Promise$all,2);_permissions=_yield$Promise$all2[0].permissions;_routes=_yield$Promise$all2[1].routes;dispatch({type:'GET_DATA_SUCCEEDED',permissions:(0,_utils.cleanPermissions)(_permissions),routes:_routes});_context2.next=16;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](0);message=(0,_lodash.get)(_context2.t0,['response','payload','message'],'An error occured');dispatch({type:'GET_DATA_ERROR'});if(message!=='Forbidden'){toggleNotification({type:'warning',message:message});}case 16:case"end":return _context2.stop();}}},_callee2,null,[[0,11]]);})),[toggleNotification]);(0,_react.useEffect)(function(){if(shouldFetchData){fetchPlugins();}},[fetchPlugins,shouldFetchData]);return{permissions:permissions,routes:routes,getData:fetchPlugins,isLoading:isLoading};};var _default=usePlugins;exports.default=_default;

/***/ }),

/***/ 37656:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var init=function init(initialState,shouldFetchData){return _objectSpread(_objectSpread({},initialState),{},{isLoading:shouldFetchData});};var _default=init;exports.default=_default;

/***/ }),

/***/ 48170:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.initialState=exports.default=void 0;var _immer=_interopRequireDefault(__webpack_require__(66312));/* eslint-disable consistent-return */var initialState={permissions:{},routes:{},isLoading:true};exports.initialState=initialState;var reducer=function reducer(state,action){return(0,_immer["default"])(state,function(draftState){switch(action.type){case'GET_DATA':{draftState.isLoading=true;draftState.permissions={};draftState.routes={};break;}case'GET_DATA_SUCCEEDED':{draftState.permissions=action.permissions;draftState.routes=action.routes;draftState.isLoading=false;break;}case'GET_DATA_ERROR':{draftState.isLoading=false;break;}default:return draftState;}});};var _default=reducer;exports.default=_default;

/***/ }),

/***/ 99498:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=__webpack_require__(67294);var _helperPlugin=__webpack_require__(68547);var _lodash=__webpack_require__(96486);var _init=_interopRequireDefault(__webpack_require__(88952));var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _reducer=_interopRequireWildcard(__webpack_require__(68751));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var useRolesList=function useRolesList(){var shouldFetchData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var _useReducer=(0,_react.useReducer)(_reducer["default"],_reducer.initialState,function(){return(0,_init["default"])(_reducer.initialState,shouldFetchData);}),_useReducer2=(0,_slicedToArray2["default"])(_useReducer,2),_useReducer2$=_useReducer2[0],roles=_useReducer2$.roles,isLoading=_useReducer2$.isLoading,dispatch=_useReducer2[1];var toggleNotification=(0,_helperPlugin.useNotification)();var isMounted=(0,_react.useRef)(true);var abortController=new AbortController();var signal=abortController.signal;(0,_react.useEffect)(function(){if(shouldFetchData){fetchRolesList();}return function(){abortController.abort();isMounted.current=false;};// eslint-disable-next-line react-hooks/exhaustive-deps
},[shouldFetchData]);var fetchRolesList=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){var _yield$request,_roles,message;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:'GET_DATA'});_context.next=4;return(0,_helperPlugin.request)("/".concat(_pluginId["default"],"/roles"),{method:'GET',signal:signal});case 4:_yield$request=_context.sent;_roles=_yield$request.roles;dispatch({type:'GET_DATA_SUCCEEDED',data:_roles});_context.next=13;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);message=(0,_lodash.get)(_context.t0,['response','payload','message'],'An error occured');if(isMounted.current){dispatch({type:'GET_DATA_ERROR'});if(message!=='Forbidden'){toggleNotification({type:'warning',message:message});}}case 13:case"end":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchRolesList(){return _ref.apply(this,arguments);};}();return{roles:roles,isLoading:isLoading,getData:fetchRolesList};};var _default=useRolesList;exports.default=_default;

/***/ }),

/***/ 88952:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var init=function init(initialState,shouldFetchData){return _objectSpread(_objectSpread({},initialState),{},{isLoading:shouldFetchData});};var _default=init;exports.default=_default;

/***/ }),

/***/ 68751:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.initialState=exports.default=void 0;var _immer=_interopRequireDefault(__webpack_require__(66312));/* eslint-disable consistent-return */var initialState={roles:[],isLoading:true};exports.initialState=initialState;var reducer=function reducer(state,action){return(0,_immer["default"])(state,function(draftState){switch(action.type){case'GET_DATA':{draftState.isLoading=true;draftState.roles=[];break;}case'GET_DATA_SUCCEEDED':{draftState.roles=action.data;draftState.isLoading=false;break;}case'GET_DATA_ERROR':{draftState.isLoading=false;break;}default:return draftState;}});};var _default=reducer;exports.default=_default;

/***/ }),

/***/ 21811:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* provided dependency */ var console = __webpack_require__(25108);
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireWildcard(__webpack_require__(67294));var _reactRouterDom=__webpack_require__(39711);var _Layout=__webpack_require__(78862);var _Main=__webpack_require__(62031);var _Button=__webpack_require__(19408);var _Stack=__webpack_require__(9008);var _Box=__webpack_require__(5493);var _TextInput=__webpack_require__(55967);var _Textarea=__webpack_require__(59626);var _Typography=__webpack_require__(49425);var _Check=_interopRequireDefault(__webpack_require__(84734));var _Grid=__webpack_require__(34626);var _formik=__webpack_require__(80831);var _reactIntl=__webpack_require__(97132);var _helperPlugin=__webpack_require__(68547);var _UsersPermissions=_interopRequireDefault(__webpack_require__(38217));var _getTrad=_interopRequireDefault(__webpack_require__(30078));var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _hooks=__webpack_require__(1137);var _schema=_interopRequireDefault(__webpack_require__(46650));var _axiosInstance=_interopRequireDefault(__webpack_require__(27778));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var EditPage=function EditPage(){var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),isSubmitting=_useState2[0],setIsSubmitting=_useState2[1];var toggleNotification=(0,_helperPlugin.useNotification)();var _useHistory=(0,_reactRouterDom.useHistory)(),goBack=_useHistory.goBack;var _useOverlayBlocker=(0,_helperPlugin.useOverlayBlocker)(),lockApp=_useOverlayBlocker.lockApp,unlockApp=_useOverlayBlocker.unlockApp;var _usePlugins=(0,_hooks.usePlugins)(),isLoadingPlugins=_usePlugins.isLoading,permissions=_usePlugins.permissions,routes=_usePlugins.routes;var _useTracking=(0,_helperPlugin.useTracking)(),trackUsage=_useTracking.trackUsage;var permissionsRef=(0,_react.useRef)();var handleCreateRoleSubmit=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(data){var _permissions;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Set loading state
lockApp();setIsSubmitting(true);_context.prev=2;_permissions=permissionsRef.current.getPermissions();// Update role in Strapi
_context.next=6;return _axiosInstance["default"].post("/".concat(_pluginId["default"],"/roles"),_objectSpread(_objectSpread(_objectSpread({},data),_permissions),{},{users:[]}));case 6:// Notify success
trackUsage('didCreateRole');toggleNotification({type:'success',message:{id:(0,_getTrad["default"])('Settings.roles.created'),defaultMessage:'Role created'}});// Forcing redirecting since we don't have the id in the response
goBack();_context.next=15;break;case 11:_context.prev=11;_context.t0=_context["catch"](2);console.error(_context.t0);toggleNotification({type:'warning',message:{id:'notification.error',defaultMessage:'An error occurred'}});case 15:// Unset loading state
setIsSubmitting(false);unlockApp();case 17:case"end":return _context.stop();}}},_callee,null,[[2,11]]);}));return function handleCreateRoleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_react["default"].createElement(_Main.Main,null,/*#__PURE__*/_react["default"].createElement(_helperPlugin.SettingsPageTitle,{name:"Roles"}),/*#__PURE__*/_react["default"].createElement(_formik.Formik,{enableReinitialize:true,initialValues:{name:'',description:''},onSubmit:handleCreateRoleSubmit,validationSchema:_schema["default"]},function(_ref2){var handleSubmit=_ref2.handleSubmit,values=_ref2.values,handleChange=_ref2.handleChange,errors=_ref2.errors;return/*#__PURE__*/_react["default"].createElement(_helperPlugin.Form,{noValidate:true,onSubmit:handleSubmit},/*#__PURE__*/_react["default"].createElement(_Layout.HeaderLayout,{primaryAction:!isLoadingPlugins&&/*#__PURE__*/_react["default"].createElement(_Button.Button,{type:"submit",loading:isSubmitting,startIcon:/*#__PURE__*/_react["default"].createElement(_Check["default"],null)},formatMessage({id:'app.components.Button.save',defaultMessage:'Save'})),title:formatMessage({id:'Settings.roles.create.title',defaultMessage:'Create a role'}),subtitle:formatMessage({id:'Settings.roles.create.description',defaultMessage:'Define the rights given to the role'})}),/*#__PURE__*/_react["default"].createElement(_Layout.ContentLayout,null,/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:7},/*#__PURE__*/_react["default"].createElement(_Box.Box,{background:"neutral0",hasRadius:true,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:4},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",as:"h2"},formatMessage({id:(0,_getTrad["default"])('EditPage.form.roles'),defaultMessage:'Role details'})),/*#__PURE__*/_react["default"].createElement(_Grid.Grid,{gap:4},/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:6},/*#__PURE__*/_react["default"].createElement(_TextInput.TextInput,{name:"name",value:values.name||'',onChange:handleChange,label:formatMessage({id:'Settings.roles.form.input.name',defaultMessage:'Name'}),error:errors.name?formatMessage({id:errors.name,defaultMessage:'Invalid value'}):null})),/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:6},/*#__PURE__*/_react["default"].createElement(_Textarea.Textarea,{name:"description",value:values.description||'',onChange:handleChange,label:formatMessage({id:'Settings.roles.form.input.description',defaultMessage:'Description'}),error:errors.description?formatMessage({id:errors.description,defaultMessage:'Invalid value'}):null}))))),!isLoadingPlugins&&/*#__PURE__*/_react["default"].createElement(_UsersPermissions["default"],{ref:permissionsRef,permissions:permissions,routes:routes}))));}));};var _default=EditPage;exports.default=_default;

/***/ }),

/***/ 46650:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var yup=_interopRequireWildcard(__webpack_require__(53209));var _helperPlugin=__webpack_require__(68547);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var schema=yup.object().shape({name:yup.string().required(_helperPlugin.translatedErrors.required),description:yup.string().required(_helperPlugin.translatedErrors.required)});var _default=schema;exports.default=_default;

/***/ }),

/***/ 23854:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* provided dependency */ var console = __webpack_require__(25108);
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _defineProperty2=_interopRequireDefault(__webpack_require__(59713));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireWildcard(__webpack_require__(67294));var _Layout=__webpack_require__(78862);var _Main=__webpack_require__(62031);var _Button=__webpack_require__(19408);var _Stack=__webpack_require__(9008);var _Box=__webpack_require__(5493);var _TextInput=__webpack_require__(55967);var _Textarea=__webpack_require__(59626);var _Typography=__webpack_require__(49425);var _ArrowLeft=_interopRequireDefault(__webpack_require__(68717));var _Check=_interopRequireDefault(__webpack_require__(84734));var _Link=__webpack_require__(85104);var _Grid=__webpack_require__(34626);var _formik=__webpack_require__(80831);var _reactIntl=__webpack_require__(97132);var _reactRouterDom=__webpack_require__(39711);var _helperPlugin=__webpack_require__(68547);var _UsersPermissions=_interopRequireDefault(__webpack_require__(38217));var _getTrad=_interopRequireDefault(__webpack_require__(30078));var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _hooks=__webpack_require__(1137);var _schema=_interopRequireDefault(__webpack_require__(78188));var _axiosInstance=_interopRequireDefault(__webpack_require__(27778));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var EditPage=function EditPage(){var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),isSubmitting=_useState2[0],setIsSubmitting=_useState2[1];var toggleNotification=(0,_helperPlugin.useNotification)();var _useOverlayBlocker=(0,_helperPlugin.useOverlayBlocker)(),lockApp=_useOverlayBlocker.lockApp,unlockApp=_useOverlayBlocker.unlockApp;var _useRouteMatch=(0,_reactRouterDom.useRouteMatch)("/settings/".concat(_pluginId["default"],"/roles/:id")),id=_useRouteMatch.params.id;var _usePlugins=(0,_hooks.usePlugins)(),isLoadingPlugins=_usePlugins.isLoading,routes=_usePlugins.routes;var _useFetchRole=(0,_hooks.useFetchRole)(id),role=_useFetchRole.role,onSubmitSucceeded=_useFetchRole.onSubmitSucceeded,isLoadingRole=_useFetchRole.isLoading;var permissionsRef=(0,_react.useRef)();var handleEditRoleSubmit=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(data){var permissions;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Set loading state
lockApp();setIsSubmitting(true);_context.prev=2;permissions=permissionsRef.current.getPermissions();// Update role in Strapi
_context.next=6;return _axiosInstance["default"].put("/".concat(_pluginId["default"],"/roles/").concat(id),_objectSpread(_objectSpread(_objectSpread({},data),permissions),{},{users:[]}));case 6:// Notify success
onSubmitSucceeded({name:data.name,description:data.description});toggleNotification({type:'success',message:{id:(0,_getTrad["default"])('Settings.roles.edited'),defaultMessage:'Role edited'}});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](2);console.error(_context.t0);toggleNotification({type:'warning',message:{id:'notification.error',defaultMessage:'An error occurred'}});case 14:// Unset loading state
setIsSubmitting(false);unlockApp();case 16:case"end":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleEditRoleSubmit(_x){return _ref.apply(this,arguments);};}();if(isLoadingRole){return/*#__PURE__*/_react["default"].createElement(_helperPlugin.LoadingIndicatorPage,null);}return/*#__PURE__*/_react["default"].createElement(_Main.Main,null,/*#__PURE__*/_react["default"].createElement(_helperPlugin.SettingsPageTitle,{name:"Roles"}),/*#__PURE__*/_react["default"].createElement(_formik.Formik,{enableReinitialize:true,initialValues:{name:role.name,description:role.description},onSubmit:handleEditRoleSubmit,validationSchema:_schema["default"]},function(_ref2){var handleSubmit=_ref2.handleSubmit,values=_ref2.values,handleChange=_ref2.handleChange,errors=_ref2.errors;return/*#__PURE__*/_react["default"].createElement(_helperPlugin.Form,{noValidate:true,onSubmit:handleSubmit},/*#__PURE__*/_react["default"].createElement(_Layout.HeaderLayout,{primaryAction:!isLoadingPlugins&&/*#__PURE__*/_react["default"].createElement(_Button.Button,{disabled:role.code==='strapi-super-admin',type:"submit",loading:isSubmitting,startIcon:/*#__PURE__*/_react["default"].createElement(_Check["default"],null)},formatMessage({id:'app.components.Button.save',defaultMessage:'Save'})),title:role.name,subtitle:role.description,navigationAction:/*#__PURE__*/_react["default"].createElement(_Link.Link,{startIcon:/*#__PURE__*/_react["default"].createElement(_ArrowLeft["default"],null),to:"/settings/users-permissions/roles"},formatMessage({id:'app.components.go-back',defaultMessage:'Go back'}))}),/*#__PURE__*/_react["default"].createElement(_Layout.ContentLayout,null,/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:7},/*#__PURE__*/_react["default"].createElement(_Box.Box,{background:"neutral0",hasRadius:true,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},/*#__PURE__*/_react["default"].createElement(_Stack.Stack,{size:4},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"delta",as:"h2"},formatMessage({id:(0,_getTrad["default"])('EditPage.form.roles'),defaultMessage:'Role details'})),/*#__PURE__*/_react["default"].createElement(_Grid.Grid,{gap:4},/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:6},/*#__PURE__*/_react["default"].createElement(_TextInput.TextInput,{name:"name",value:values.name||'',onChange:handleChange,label:formatMessage({id:'Settings.roles.form.input.name',defaultMessage:'Name'}),error:errors.name?formatMessage({id:errors.name,defaultMessage:'Invalid value'}):null})),/*#__PURE__*/_react["default"].createElement(_Grid.GridItem,{col:6},/*#__PURE__*/_react["default"].createElement(_Textarea.Textarea,{name:"description",value:values.description||'',onChange:handleChange,label:formatMessage({id:'Settings.roles.form.input.description',defaultMessage:'Description'}),error:errors.description?formatMessage({id:errors.description,defaultMessage:'Invalid value'}):null}))))),!isLoadingPlugins&&/*#__PURE__*/_react["default"].createElement(_UsersPermissions["default"],{ref:permissionsRef,permissions:role.permissions,routes:routes}))));}));};var _default=EditPage;exports.default=_default;

/***/ }),

/***/ 78188:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var yup=_interopRequireWildcard(__webpack_require__(53209));var _helperPlugin=__webpack_require__(68547);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var schema=yup.object().shape({name:yup.string().required(_helperPlugin.translatedErrors.required),description:yup.string().required(_helperPlugin.translatedErrors.required)});var _default=schema;exports.default=_default;

/***/ }),

/***/ 88601:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(67154));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireDefault(__webpack_require__(67294));var _propTypes=_interopRequireDefault(__webpack_require__(45697));var _IconButton=__webpack_require__(30741);var _Typography=__webpack_require__(49425);var _Flex=__webpack_require__(67826);var _Table=__webpack_require__(41798);var _Pencil=_interopRequireDefault(__webpack_require__(19352));var _Trash=_interopRequireDefault(__webpack_require__(18568));var _helperPlugin=__webpack_require__(68547);var _reactIntl=__webpack_require__(97132);var _reactRouterDom=__webpack_require__(39711);var _utils=__webpack_require__(26270);var _pluginId=_interopRequireDefault(__webpack_require__(10576));var TableBody=function TableBody(_ref){var sortedRoles=_ref.sortedRoles,canDelete=_ref.canDelete,permissions=_ref.permissions,setRoleToDelete=_ref.setRoleToDelete,onDelete=_ref.onDelete;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useHistory=(0,_reactRouterDom.useHistory)(),push=_useHistory.push;var _onDelete=(0,_slicedToArray2["default"])(onDelete,2),showConfirmDelete=_onDelete[0],setShowConfirmDelete=_onDelete[1];var checkCanDeleteRole=function checkCanDeleteRole(role){return canDelete&&!['public','authenticated'].includes(role.type);};var handleClickDelete=function handleClickDelete(id){setRoleToDelete(id);setShowConfirmDelete(!showConfirmDelete);};var handleClickEdit=function handleClickEdit(id){push("/settings/".concat(_pluginId["default"],"/roles/").concat(id));};return/*#__PURE__*/_react["default"].createElement(_Table.Tbody,null,sortedRoles===null||sortedRoles===void 0?void 0:sortedRoles.map(function(role){return/*#__PURE__*/_react["default"].createElement(_Table.Tr,(0,_extends2["default"])({key:role.name},(0,_helperPlugin.onRowClick)({fn:function fn(){return handleClickEdit(role.id);}})),/*#__PURE__*/_react["default"].createElement(_Table.Td,{width:"20%"},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,null,role.name)),/*#__PURE__*/_react["default"].createElement(_Table.Td,{width:"50%"},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,null,role.description)),/*#__PURE__*/_react["default"].createElement(_Table.Td,{width:"30%"},/*#__PURE__*/_react["default"].createElement(_Typography.Typography,null,"".concat(role.nb_users," ").concat(formatMessage({id:(0,_utils.getTrad)('Roles.users'),defaultMessage:'users'}).toLowerCase()))),/*#__PURE__*/_react["default"].createElement(_Table.Td,null,/*#__PURE__*/_react["default"].createElement(_Flex.Flex,(0,_extends2["default"])({justifyContent:"end"},_helperPlugin.stopPropagation),/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPermissions,{permissions:permissions.updateRole},/*#__PURE__*/_react["default"].createElement(_IconButton.IconButton,{onClick:function onClick(){return handleClickEdit(role.id);},noBorder:true,icon:/*#__PURE__*/_react["default"].createElement(_Pencil["default"],null),label:formatMessage({id:'app.component.table.edit',defaultMessage:'Edit {target}'},{target:"".concat(role.name)})})),checkCanDeleteRole(role)&&/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPermissions,{permissions:permissions.deleteRole},/*#__PURE__*/_react["default"].createElement(_IconButton.IconButton,{onClick:function onClick(){return handleClickDelete(role.id);},noBorder:true,icon:/*#__PURE__*/_react["default"].createElement(_Trash["default"],null),label:formatMessage({id:'app.component.table.delete',defaultMessage:'Delete {target}'},{target:"".concat(role.name)})})))));}));};var _default=TableBody;exports.default=_default;TableBody.defaultProps={canDelete:false};TableBody.propTypes={onDelete:_propTypes["default"].array.isRequired,permissions:_propTypes["default"].object.isRequired,setRoleToDelete:_propTypes["default"].func.isRequired,sortedRoles:_propTypes["default"].array.isRequired,canDelete:_propTypes["default"].bool};

/***/ }),

/***/ 61478:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);var _typeof=__webpack_require__(50008);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _slicedToArray2=_interopRequireDefault(__webpack_require__(63038));var _react=_interopRequireWildcard(__webpack_require__(67294));var _Button=__webpack_require__(19408);var _Layout=__webpack_require__(78862);var _Main=__webpack_require__(62031);var _Table=__webpack_require__(41798);var _VisuallyHidden=__webpack_require__(26851);var _Typography=__webpack_require__(49425);var _LiveRegions=__webpack_require__(84686);var _Plus=_interopRequireDefault(__webpack_require__(80768));var _helperPlugin=__webpack_require__(68547);var _reactIntl=__webpack_require__(97132);var _reactRouterDom=__webpack_require__(39711);var _reactQuery=__webpack_require__(23724);var _matchSorter=_interopRequireDefault(__webpack_require__(63852));var _api=__webpack_require__(47792);var _utils=__webpack_require__(26270);var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _permissions=_interopRequireDefault(__webpack_require__(94920));var _TableBody=_interopRequireDefault(__webpack_require__(88601));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}var RoleListPage=function RoleListPage(){var _useTracking=(0,_helperPlugin.useTracking)(),trackUsage=_useTracking.trackUsage;var _useIntl=(0,_reactIntl.useIntl)(),formatMessage=_useIntl.formatMessage;var _useHistory=(0,_reactRouterDom.useHistory)(),push=_useHistory.push;var toggleNotification=(0,_helperPlugin.useNotification)();var _useNotifyAT=(0,_LiveRegions.useNotifyAT)(),notifyStatus=_useNotifyAT.notifyStatus;var _useQueryParams=(0,_helperPlugin.useQueryParams)(),_useQueryParams2=(0,_slicedToArray2["default"])(_useQueryParams,1),query=_useQueryParams2[0].query;var _q=(query===null||query===void 0?void 0:query._q)||'';var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2["default"])(_useState,2),showConfirmDelete=_useState2[0],setShowConfirmDelete=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2["default"])(_useState3,2),isConfirmButtonLoading=_useState4[0],setIsConfirmButtonLoading=_useState4[1];var _useState5=(0,_react.useState)(),_useState6=(0,_slicedToArray2["default"])(_useState5,2),roleToDelete=_useState6[0],setRoleToDelete=_useState6[1];(0,_helperPlugin.useFocusWhenNavigate)();var queryClient=(0,_reactQuery.useQueryClient)();var updatePermissions=(0,_react.useMemo)(function(){return{create:_permissions["default"].createRole,read:_permissions["default"].readRoles,update:_permissions["default"].updateRole,"delete":_permissions["default"].deleteRole};},[]);var _useRBAC=(0,_helperPlugin.useRBAC)(updatePermissions),isLoadingForPermissions=_useRBAC.isLoading,_useRBAC$allowedActio=_useRBAC.allowedActions,canRead=_useRBAC$allowedActio.canRead,canDelete=_useRBAC$allowedActio.canDelete;var _useQuery=(0,_reactQuery.useQuery)('get-roles',function(){return(0,_api.fetchData)(toggleNotification,notifyStatus);},{initialData:{},enabled:canRead}),isLoadingForData=_useQuery.isLoading,roles=_useQuery.data.roles,isFetching=_useQuery.isFetching;var isLoading=isLoadingForData||isFetching;var handleNewRoleClick=function handleNewRoleClick(){trackUsage('willCreateRole');push("/settings/".concat(_pluginId["default"],"/roles/new"));};var handleShowConfirmDelete=function handleShowConfirmDelete(){setShowConfirmDelete(!showConfirmDelete);};var emptyLayout={roles:{id:(0,_utils.getTrad)('Roles.empty'),defaultMessage:"You don't have any roles yet."},search:{id:(0,_utils.getTrad)('Roles.empty.search'),defaultMessage:'No roles match the search.'}};var pageTitle=formatMessage({id:(0,_utils.getTrad)('HeaderNav.link.roles'),defaultMessage:'Roles'});var deleteMutation=(0,_reactQuery.useMutation)(function(id){return(0,_api.deleteData)(id,toggleNotification);},{onSuccess:function(){var _onSuccess=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return queryClient.invalidateQueries('get-roles');case 2:case"end":return _context.stop();}}},_callee);}));function onSuccess(){return _onSuccess.apply(this,arguments);}return onSuccess;}()});var handleConfirmDelete=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsConfirmButtonLoading(true);_context2.next=3;return deleteMutation.mutateAsync(roleToDelete);case 3:setShowConfirmDelete(!showConfirmDelete);setIsConfirmButtonLoading(false);case 5:case"end":return _context2.stop();}}},_callee2);}));return function handleConfirmDelete(){return _ref.apply(this,arguments);};}();var sortedRoles=(0,_matchSorter["default"])(roles||[],_q,{keys:['name','description']});var emptyContent=_q&&!sortedRoles.length?'search':'roles';var colCount=4;var rowCount=((roles===null||roles===void 0?void 0:roles.length)||0)+1;return/*#__PURE__*/_react["default"].createElement(_Layout.Layout,null,/*#__PURE__*/_react["default"].createElement(_helperPlugin.SettingsPageTitle,{name:pageTitle}),/*#__PURE__*/_react["default"].createElement(_Main.Main,{"aria-busy":isLoading},/*#__PURE__*/_react["default"].createElement(_Layout.HeaderLayout,{title:formatMessage({id:'Settings.roles.title',defaultMessage:'Roles'}),subtitle:formatMessage({id:'Settings.roles.list.description',defaultMessage:'List of roles'}),primaryAction:/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPermissions,{permissions:_permissions["default"].createRole},/*#__PURE__*/_react["default"].createElement(_Button.Button,{onClick:handleNewRoleClick,startIcon:/*#__PURE__*/_react["default"].createElement(_Plus["default"],null),size:"L"},formatMessage({id:(0,_utils.getTrad)('List.button.roles'),defaultMessage:'Add new role'})))}),/*#__PURE__*/_react["default"].createElement(_Layout.ActionLayout,{startActions:/*#__PURE__*/_react["default"].createElement(_helperPlugin.SearchURLQuery,{label:formatMessage({id:'app.component.search.label',defaultMessage:'Search'})})}),/*#__PURE__*/_react["default"].createElement(_Layout.ContentLayout,null,!canRead&&/*#__PURE__*/_react["default"].createElement(_helperPlugin.NoPermissions,null),(isLoading||isLoadingForPermissions)&&/*#__PURE__*/_react["default"].createElement(_helperPlugin.LoadingIndicatorPage,null),canRead&&sortedRoles&&sortedRoles!==null&&sortedRoles!==void 0&&sortedRoles.length?/*#__PURE__*/_react["default"].createElement(_Table.Table,{colCount:colCount,rowCount:rowCount},/*#__PURE__*/_react["default"].createElement(_Table.Thead,null,/*#__PURE__*/_react["default"].createElement(_Table.Tr,null,/*#__PURE__*/_react["default"].createElement(_Table.Th,null,/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"sigma",textColor:"neutral600"},formatMessage({id:(0,_utils.getTrad)('Roles.name'),defaultMessage:'Name'}))),/*#__PURE__*/_react["default"].createElement(_Table.Th,null,/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"sigma",textColor:"neutral600"},formatMessage({id:(0,_utils.getTrad)('Roles.description'),defaultMessage:'Description'}))),/*#__PURE__*/_react["default"].createElement(_Table.Th,null,/*#__PURE__*/_react["default"].createElement(_Typography.Typography,{variant:"sigma",textColor:"neutral600"},formatMessage({id:(0,_utils.getTrad)('Roles.users'),defaultMessage:'Users'}))),/*#__PURE__*/_react["default"].createElement(_Table.Th,null,/*#__PURE__*/_react["default"].createElement(_VisuallyHidden.VisuallyHidden,null,formatMessage({id:'components.TableHeader.actions-label',defaultMessage:'Actions'}))))),/*#__PURE__*/_react["default"].createElement(_TableBody["default"],{sortedRoles:sortedRoles,canDelete:canDelete,permissions:_permissions["default"],setRoleToDelete:setRoleToDelete,onDelete:[showConfirmDelete,setShowConfirmDelete]})):/*#__PURE__*/_react["default"].createElement(_helperPlugin.EmptyStateLayout,{content:emptyLayout[emptyContent]})),/*#__PURE__*/_react["default"].createElement(_helperPlugin.ConfirmDialog,{isConfirmButtonLoading:isConfirmButtonLoading,onConfirm:handleConfirmDelete,onToggleDialog:handleShowConfirmDelete,isOpen:showConfirmDelete})));};var _default=RoleListPage;exports.default=_default;

/***/ }),

/***/ 47792:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.fetchData=exports.deleteData=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _utils=__webpack_require__(26270);var fetchData=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(toggleNotification,notifyStatus){var _yield$axiosInstance$,data;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _utils.axiosInstance.get((0,_utils.getRequestURL)('roles'));case 3:_yield$axiosInstance$=_context.sent;data=_yield$axiosInstance$.data;notifyStatus('The roles have loaded successfully');return _context.abrupt("return",data);case 9:_context.prev=9;_context.t0=_context["catch"](0);toggleNotification({type:'warning',message:{id:'notification.error'}});throw new Error('error');case 13:case"end":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(_x,_x2){return _ref.apply(this,arguments);};}();exports.fetchData=fetchData;var deleteData=/*#__PURE__*/function(){var _ref2=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(id,toggleNotification){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _utils.axiosInstance["delete"]("".concat((0,_utils.getRequestURL)('roles'),"/").concat(id));case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2["catch"](0);toggleNotification({type:'warning',message:{id:'notification.error',defaultMessage:'An error occured'}});case 8:case"end":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function deleteData(_x3,_x4){return _ref2.apply(this,arguments);};}();exports.deleteData=deleteData;

/***/ }),

/***/ 46285:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(67294));var _helperPlugin=__webpack_require__(68547);var _permissions=_interopRequireDefault(__webpack_require__(94920));var _CreatePage=_interopRequireDefault(__webpack_require__(21811));var ProtectedRolesCreatePage=function ProtectedRolesCreatePage(){return/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPagePermissions,{permissions:_permissions["default"].createRole},/*#__PURE__*/_react["default"].createElement(_CreatePage["default"],null));};var _default=ProtectedRolesCreatePage;exports.default=_default;

/***/ }),

/***/ 11226:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(67294));var _helperPlugin=__webpack_require__(68547);var _permissions=_interopRequireDefault(__webpack_require__(94920));var _EditPage=_interopRequireDefault(__webpack_require__(23854));var ProtectedRolesEditPage=function ProtectedRolesEditPage(){return/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPagePermissions,{permissions:_permissions["default"].updateRole},/*#__PURE__*/_react["default"].createElement(_EditPage["default"],null));};var _default=ProtectedRolesEditPage;exports.default=_default;

/***/ }),

/***/ 41553:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(67294));var _helperPlugin=__webpack_require__(68547);var _permissions=_interopRequireDefault(__webpack_require__(94920));var _ListPage=_interopRequireDefault(__webpack_require__(61478));var ProtectedRolesListPage=function ProtectedRolesListPage(){return/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPagePermissions,{permissions:_permissions["default"].accessRoles},/*#__PURE__*/_react["default"].createElement(_ListPage["default"],null));};var _default=ProtectedRolesListPage;exports.default=_default;

/***/ }),

/***/ 31285:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(67294));var _reactRouterDom=__webpack_require__(39711);var _helperPlugin=__webpack_require__(68547);var _pluginId=_interopRequireDefault(__webpack_require__(10576));var _permissions=_interopRequireDefault(__webpack_require__(94920));var _ProtectedListPage=_interopRequireDefault(__webpack_require__(41553));var _ProtectedEditPage=_interopRequireDefault(__webpack_require__(11226));var _ProtectedCreatePage=_interopRequireDefault(__webpack_require__(46285));var Roles=function Roles(){return/*#__PURE__*/_react["default"].createElement(_helperPlugin.CheckPagePermissions,{permissions:_permissions["default"].accessRoles},/*#__PURE__*/_react["default"].createElement(_reactRouterDom.Switch,null,/*#__PURE__*/_react["default"].createElement(_reactRouterDom.Route,{path:"/settings/".concat(_pluginId["default"],"/roles/new"),component:_ProtectedCreatePage["default"],exact:true}),/*#__PURE__*/_react["default"].createElement(_reactRouterDom.Route,{path:"/settings/".concat(_pluginId["default"],"/roles/:id"),component:_ProtectedEditPage["default"],exact:true}),/*#__PURE__*/_react["default"].createElement(_reactRouterDom.Route,{path:"/settings/".concat(_pluginId["default"],"/roles"),component:_ProtectedListPage["default"],exact:true}),/*#__PURE__*/_react["default"].createElement(_reactRouterDom.Route,{path:"",component:_helperPlugin.NotFound})));};var _default=Roles;exports.default=_default;

/***/ }),

/***/ 27778:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(87757));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(48926));var _axios=_interopRequireDefault(__webpack_require__(9669));var _helperPlugin=__webpack_require__(68547);var instance=_axios["default"].create({baseURL:""});instance.interceptors.request.use(/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(config){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config.headers={Authorization:"Bearer ".concat(_helperPlugin.auth.getToken()),Accept:'application/json','Content-Type':'application/json'};return _context.abrupt("return",config);case 2:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),function(error){Promise.reject(error);});instance.interceptors.response.use(function(response){return response;},function(error){var _error$response;// whatever you want to do with the error
if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){_helperPlugin.auth.clearAppStorage();window.location.reload();}throw error;});var _default=instance;exports.default=_default;

/***/ }),

/***/ 42539:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _lodash=__webpack_require__(96486);var cleanPermissions=function cleanPermissions(permissions){return Object.keys(permissions).reduce(function(acc,current){var currentPermission=permissions[current].controllers;var cleanedControllers=Object.keys(currentPermission).reduce(function(acc2,curr){if((0,_lodash.isEmpty)(currentPermission[curr])){return acc2;}acc2[curr]=currentPermission[curr];return acc2;},{});if((0,_lodash.isEmpty)(cleanedControllers)){return acc;}acc[current]={controllers:cleanedControllers};return acc;},{});};var _default=cleanPermissions;exports.default=_default;

/***/ }),

/***/ 3226:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _upperFirst=_interopRequireDefault(__webpack_require__(11700));function formatPluginName(pluginSlug){switch(pluginSlug){case'application':return'Application';case'plugin::content-manager':return'Content manager';case'plugin::content-type-builder':return'Content types builder';case'plugin::documentation':return'Documentation';case'plugin::email':return'Email';case'plugin::i18n':return'i18n';case'plugin::upload':return'Upload';case'plugin::users-permissions':return'Users-permissions';default:return(0,_upperFirst["default"])(pluginSlug.replace('api::','').replace('plugin::',''));}}var _default=formatPluginName;exports.default=_default;

/***/ }),

/***/ 85317:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var formatPolicies=function formatPolicies(policies){return policies.reduce(function(acc,current){acc.push({label:current,value:current});return acc;},[]);};var _default=formatPolicies;exports.default=_default;

/***/ }),

/***/ 12132:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));exports.default=void 0;var _pluginId=_interopRequireDefault(__webpack_require__(10576));var getRequestURL=function getRequestURL(endPoint){return"/".concat(_pluginId["default"],"/").concat(endPoint);};var _default=getRequestURL;exports.default=_default;

/***/ }),

/***/ 26270:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var _interopRequireDefault=__webpack_require__(95318);Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "axiosInstance", ({enumerable:true,get:function get(){return _axiosInstance["default"];}}));Object.defineProperty(exports, "cleanPermissions", ({enumerable:true,get:function get(){return _cleanPermissions["default"];}}));Object.defineProperty(exports, "formatPolicies", ({enumerable:true,get:function get(){return _formatPolicies["default"];}}));Object.defineProperty(exports, "getRequestURL", ({enumerable:true,get:function get(){return _getRequestURL["default"];}}));Object.defineProperty(exports, "getTrad", ({enumerable:true,get:function get(){return _getTrad["default"];}}));var _axiosInstance=_interopRequireDefault(__webpack_require__(27778));var _cleanPermissions=_interopRequireDefault(__webpack_require__(42539));var _getRequestURL=_interopRequireDefault(__webpack_require__(12132));var _getTrad=_interopRequireDefault(__webpack_require__(30078));var _formatPolicies=_interopRequireDefault(__webpack_require__(85317));

/***/ }),

/***/ 13217:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseSlice = __webpack_require__(14259);

/**
 * Gets all but the first element of `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.tail([1, 2, 3]);
 * // => [2, 3]
 */
function tail(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseSlice(array, 1, length) : [];
}

module.exports = tail;


/***/ })

}]);